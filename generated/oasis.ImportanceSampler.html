<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>oasis.ImportanceSampler &#8212; OASIS v0.1.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'v0.1.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="oasis.DruckSampler" href="oasis.DruckSampler.html" />
    <link rel="prev" title="oasis.OASISSampler" href="oasis.OASISSampler.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="oasis-importancesampler">
<h1><code class="xref py py-mod docutils literal"><span class="pre">oasis</span></code>.ImportanceSampler<a class="headerlink" href="#oasis-importancesampler" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="oasis.ImportanceSampler">
<em class="property">class </em><code class="descclassname">oasis.</code><code class="descname">ImportanceSampler</code><span class="sig-paren">(</span><em>alpha</em>, <em>predictions</em>, <em>scores</em>, <em>oracle</em>, <em>proba=False</em>, <em>epsilon=0.001</em>, <em>max_iter=None</em>, <em>identifiers=None</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="headerlink" href="#oasis.ImportanceSampler" title="Permalink to this definition">¶</a></dt>
<dd><p>Importance sampling for estimation of the weighted F-measure</p>
<p>Estimates the quantity:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>TP / (alpha * (TP + FP) + (1 - alpha) * (TP + FN))
</pre></div>
</div>
<p>on a finite pool by sampling items according to an instrumental
distribution that minimises asymptotic variance. The instrumental
distribution is estimated based on classifier confidence scores. True
labels are queried from an oracle. See reference <a class="reference internal" href="#sawade2010" id="id1">[Sawade2010]</a> for details.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>alpha</strong> : float</p>
<blockquote>
<div><p>Weight for the F-measure. Valid weights are on the interval [0, 1].
<code class="docutils literal"><span class="pre">alpha</span> <span class="pre">==</span> <span class="pre">1</span></code> corresponds to precision, <code class="docutils literal"><span class="pre">alpha</span> <span class="pre">==</span> <span class="pre">0</span></code> corresponds to
recall, and <code class="docutils literal"><span class="pre">alpha</span> <span class="pre">==</span> <span class="pre">0.5</span></code> corresponds to the balanced F-measure.</p>
</div></blockquote>
<p><strong>predictions</strong> : array-like, shape=(n_items,n_class)</p>
<blockquote>
<div><p>Predicted labels for the items in the pool. Rows represent items and
columns represent different classifiers under evaluation (i.e. more
than one classifier may be evaluated in parallel). Valid labels are 0
or 1.</p>
</div></blockquote>
<p><strong>scores</strong> : array-like, shape=(n_items,)</p>
<blockquote>
<div><p>Scores which quantify the confidence in the classifiers&#8217; predictions.
Rows represent items and columns represent different classifiers under
evaluation. High scores indicate a high confidence that the true label
is 1 (and vice versa for label 0). It is recommended that the scores
be scaled to the interval [0,1]. If the scores lie outside [0,1] they
will be automatically re-scaled by applying the logisitic function.</p>
</div></blockquote>
<p><strong>oracle</strong> : function</p>
<blockquote>
<div><p>Function that returns ground truth labels for items in the pool. The
function should take an item identifier as input (i.e. its
corresponding row index) and return the ground truth label. Valid
labels are 0 or 1.</p>
</div></blockquote>
<p><strong>proba</strong> : array-like, dtype=bool, shape=(n_class,), optional, default None</p>
<blockquote>
<div><p>Indicates whether the scores are probabilistic, i.e. on the interval
[0, 1] for each classifier under evaluation. If proba is False for
a classifier, then the corresponding scores will be re-scaled by
applying the logistic function. If None, proba will default to
False for all classifiers.</p>
</div></blockquote>
<p><strong>epsilon</strong> : float, optional, default 1e-3</p>
<blockquote>
<div><p>Epsilon-greedy parameter. Valid values are on the interval [0, 1]. The
&#8220;asymptotically optimal&#8221; distribution is sampled from with probability
<cite>1 - epsilon</cite> and the passive distribution is sampled from with
probability <cite>epsilon</cite>. The sampling is close to &#8220;optimal&#8221; for small
epsilon.</p>
</div></blockquote>
<p><strong>max_iter</strong> : int, optional, default None</p>
<blockquote>
<div><p>Maximum number of iterations to expect for pre-allocating arrays.
Once this limit is reached, sampling can no longer continue. If no
value is given, defaults to n_items.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Other Parameters:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first"><strong>identifiers</strong> : array-like, optional, default None</p>
<blockquote>
<div><p>Unique identifiers for the items in the pool. Must match the row order
of the &#8220;predictions&#8221; parameter. If no value is given, defaults to
[0, 1, ..., n_items].</p>
</div></blockquote>
<p><strong>debug</strong> : bool, optional, default False</p>
<blockquote class="last">
<div><p>Whether to print out verbose debugging information.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="sawade2010" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Sawade2010]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>)</em> C. Sawade, N. Landwehr, and T. Scheffer, “Active Estimation
of F-Measures,” in Advances in Neural Information Processing Systems 23,
2010, pp. 2083–2091</td></tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="94%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a href="#id3"><span class="problematic" id="id4">estimate_</span></a></td>
<td>(numpy.ndarray) F-measure estimates for each iteration.</td>
</tr>
<tr class="row-even"><td><a href="#id5"><span class="problematic" id="id6">queried_oracle_</span></a></td>
<td>(numpy.ndarray) Records whether the oracle was queried at each iteration (True) or whether a cached label was used (False).</td>
</tr>
<tr class="row-odd"><td><a href="#id7"><span class="problematic" id="id8">cached_labels_</span></a></td>
<td>(numpy.ndarray, shape=(n_items,)) Previously sampled ground truth labels for the items in the pool. Items which have not had their labels queried are recorded as NaNs. The order of the items matches the row order for the &#8220;predictions&#8221; parameter.</td>
</tr>
<tr class="row-even"><td><a href="#id9"><span class="problematic" id="id10">t_</span></a></td>
<td>(int) Iteration index.</td>
</tr>
<tr class="row-odd"><td><a href="#id11"><span class="problematic" id="id12">inst_pmf_</span></a></td>
<td>(numpy.ndarray, shape=(n_items,)) Epsilon-greedy instrumental pmf used for sampling.</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">reset</span></code>()</td>
<td>Resets the sampler to its initial state</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">sample</span></code>(n_to_sample,&nbsp;**kwargs)</td>
<td>Sample a sequence of items from the pool</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">sample_distinct</span></code>(n_to_sample,&nbsp;**kwargs)</td>
<td>Sample a sequence of items from the pool until a minimum number of</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="oasis.ImportanceSampler.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>alpha</em>, <em>predictions</em>, <em>scores</em>, <em>oracle</em>, <em>proba=False</em>, <em>epsilon=0.001</em>, <em>max_iter=None</em>, <em>identifiers=None</em>, <em>debug=False</em><span class="sig-paren">)</span><a class="headerlink" href="#oasis.ImportanceSampler.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<div class="clearer"></div></div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">OASIS</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=ngmarchant&repo=oasis&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../sections/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/oasis.html">OASIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/other-samplers.html">Other samplers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../sections/api-ref.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../sections/api-ref.html#samplers-for-evaluation">Samplers for Evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sections/api-ref.html#stratification">Stratification</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/tutorial.html">Tutorial</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../sections/api-ref.html">API Reference</a><ul>
      <li>Previous: <a href="oasis.OASISSampler.html" title="previous chapter"><code class="docutils literal"><span class="pre">oasis</span></code>.OASISSampler</a></li>
      <li>Next: <a href="oasis.DruckSampler.html" title="next chapter"><code class="docutils literal"><span class="pre">oasis</span></code>.DruckSampler</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Neil G. Marchant.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/generated/oasis.ImportanceSampler.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/ngmarchant/oasis" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>